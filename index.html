<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hello Matthew - Web / Mac App Designer</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6">

  <div class="max-w-7xl mx-auto h-screen">
    <h1 class="text-xl font-bold ml-2 mb-4 font-mono">Hi, I'm Matthew. I design products using web technology.</h1>

    <!-- Search box -->
    <div class="ml-2 mb-4">
      <input id="searchInput" type="text" placeholder=" Search projects..." class="w-[250px] border border-gray-300 rounded p-2">
    </div>

    <!-- Responsive flex container for projects -->
    <div id="projectList" class="flex flex-wrap pb-36"></div>
  </div>

  <script>
  const projectList = document.getElementById('projectList');
const searchInput = document.getElementById('searchInput');
const placeholderImage = 'https://dropzone.olk1.com/uploads/placeholder.png';

let projects = [];

// =====================
// Utility: Create icon link HTML
// =====================
function createIconLink(url, title, svgHtml) {
  if (!url || url === 'https://') return '';
  const colorClass =
    title === 'Live Site'
      ? 'green-600'
      : title === 'Download'
      ? 'white'
      : 'white';
  return `
    <a href="${url}" target="_blank"
      class="text-gray-700 hover:text-${colorClass} transform hover:scale-110 transition duration-200"
      title="${title}">
      ${svgHtml}
    </a>`;
}

// =====================
// Render Projects
// =====================
function renderProjects(filter = '') {
  projectList.innerHTML = ''; // clear current list
  const filteredProjects = projects.filter((project) => {
    const searchText = filter.toLowerCase();
    return (
      project.name.toLowerCase().includes(searchText) ||
      (project.description &&
        project.description.toLowerCase().includes(searchText))
    );
  });

  // Reverse order (latest first)
  filteredProjects
    .slice()
    .reverse()
    .forEach((project) => {
      const cardWrapper = document.createElement('div');
      cardWrapper.className = 'p-2 w-full sm:w-1/2 md:w-1/3 lg:w-1/4';

      const card = document.createElement('div');
      card.className = 'rounded-xl border-2 border-white p-0 bg-[#333] max-w-md w-full flex flex-col';

      // Build links HTML
      let linksHtml = '';
      linksHtml += createIconLink(
        project.downloadUrl,
        'Download',
        `
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 inline-block mt-2"
          fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round"
            stroke-width="2"
            d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5m0 0l5-5m-5 5V4"/>
        </svg>`
      );

      linksHtml += createIconLink(
        project.githubUrl,
        'Codebase',
        `
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 inline-block mt-2 ml-4"
          fill="currentColor" viewBox="0 0 24 24">
          <path
            d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303
            3.438 9.8 8.205 11.385.6.113.82-.258.82-.577v-2.234
            c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756
            -1.09-.744.084-.729.084-.729 1.205.084 1.838
            1.237 1.838 1.237 1.07 1.834 2.809
            1.304 3.495.997.108-.775.418-1.305.762-1.605
            -2.665-.304-5.466-1.332-5.466-5.93 0-1.31.467-2.381
            1.235-3.221-.123-.303-.536-1.524.117-3.176
            0 0 1.008-.322 3.3 1.23.957-.266 1.983-.399
            3.003-.404 1.02.005 2.047.138 3.006.404
            2.291-1.552 3.297-1.23 3.297-1.23
            .654 1.653.242 2.874.12 3.176.77.84
            1.233 1.911 1.233 3.221 0 4.61-2.804
            5.625-5.475 5.921.43.371.823 1.103.823
            2.222v3.293c0 .319.218.694.825.576C20.565
            22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
        </svg>`
      );

      linksHtml += createIconLink(
        project.liveUrl,
        'Live Site',
        `
        <svg xmlns="http://www.w3.org/2000/svg" 
          class="w-10 h-10 inline-block mt-2 transition-transform duration-300"
          fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5v14l11-7z" /></svg>`);

      // Build project card content
      const cardContent = document.createElement('div');
      cardContent.className = 'bg-[#111] text-white rounded-xl flex flex-col';

      const validImage = project.imageUrl && project.imageUrl !== 'https://' 
        ? project.imageUrl 
        : placeholderImage;

      const imageElement = `
        <img 
          src="${validImage}" 
          alt="${project.name}" 
          class="p-2 mt-o w-full h-auto rounded transition hover:opacity-90"
        >
      `;

      const clickableImage = (project.liveUrl && project.liveUrl !== 'https://')
        ? `<a href="${project.liveUrl}" target="_blank" rel="noopener noreferrer">${imageElement}</a>`
        : imageElement;

      cardContent.innerHTML = `
        <h2 class="font-bold text-md p-1 pl-3 mt-0 bg-[#222] text-white w-full">
          ${project.name}
        </h2>
        <p class="tracking-wide text-black bg-white mx-2 mt-2 p-2">${project.description || ''}</p>
        ${clickableImage}
        <div class="mb-2 -mt-2.5 flex items-center justify-center space-x-3">
          ${linksHtml}
        </div>
      `;


      card.appendChild(cardContent);
      cardWrapper.appendChild(card);
      projectList.appendChild(cardWrapper);
    });
}

// =====================
// Load projects.json
// =====================
async function loadProjects() {
  try {
    const response = await fetch('projects.json');
    if (!response.ok) throw new Error('Failed to load projects.json');
    projects = await response.json();
    renderProjects();
  } catch (error) {
    console.error('Error loading project data:', error);
  }
}

// =====================
// Search Input Listener
// =====================
searchInput.addEventListener('input', (e) => {
  renderProjects(e.target.value);
});

// =====================
// Initial Load
// =====================
loadProjects();
  
  </script>

</body>
</html>
